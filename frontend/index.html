<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lobianco Investimentos | Imobiliária de Alto Padrão</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Slick Carousel -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>

  <style>
    :root {
      --azul: #0066CC;
      --preto: #000000;
      --vermelho: #CC0000;
      --branco: #FFFFFF;
      --cinza: #CCCCCC;
      --dourado: #d4af37;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Poppins', sans-serif; background: var(--branco); color: var(--preto); }

    /* Navbar */
    .navbar { background: var(--branco); box-shadow: 0 4px 10px rgba(0,0,0,0.05); padding: 10px 0; }
    .navbar-brand { font-weight: 700; font-size: 1.8rem; color: var(--azul); display: flex; align-items: center; }
    .nav-link { color: var(--preto) !important; font-weight: 500; margin: 0 15px; }
    .nav-link:hover { color: var(--azul) !important; }

    /* Hero Carousel */
    .hero-carousel { height: 70vh; overflow: hidden; }
    .hero-slide { height: 70vh; background-size: cover; background-position: center; display: flex; align-items: center; justify-content: flex-end; color: white; padding: 0 50px; position: relative; }
    .hero-content { max-width: 500px; text-align: right; }
    .hero-title { font-size: 3.5rem; font-weight: 700; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
    .hero-subtitle { font-size: 1.4rem; margin-top: 10px; }

    /* Cards */
    .property-card { background: white; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); overflow: hidden; transition: 0.3s; margin-bottom: 30px; }
    .property-card:hover { transform: translateY(-10px); }
    .property-card img { height: 230px; object-fit: cover; width: 100%; }
    .property-info { padding: 20px; }
    .property-info h5 { font-weight: 700; color: var(--azul); }
    .property-info p { font-size: 0.9rem; color: #333; }
    .property-price { color: var(--vermelho); font-weight: 700; font-size: 1.3rem; }

    /* Chat */
    .chat-assistant { position: fixed; bottom: 25px; right: 25px; z-index: 1000; }
    .chat-button { width: 60px; height: 60px; background: var(--azul); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }

    /* Ícones Sociais Laterais */
    .social-bar {
      position: fixed;
      top: 50%;
      left: 18px;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 999;
    }
    .social-bar a {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--azul);
      color: white;
      border-radius: 50%;
      box-shadow: 0 6px 18px rgba(0,0,0,0.14);
      transition: transform 0.18s ease, background 0.18s ease;
      font-size: 1.2rem;
      text-decoration: none;
    }
    .social-bar a.whatsapp { background: #25D366; }
    .social-bar a.instagram { background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%); }
    .social-bar a.facebook { background: #1877F2; }
    .social-bar a:hover { transform: translateY(-4px); filter: brightness(0.95); }

    /* Footer */
    footer { background: var(--preto); color: var(--branco); padding: 40px 0; }
    footer .gestao-link { color: var(--cinza); font-size: 0.8rem; }
    footer .gestao-link:hover { color: var(--vermelho); }

    /* Modal */
    .modal-header { background: var(--azul); color: white; }
    @media (max-width: 768px) {
      .hero-title { font-size: 2.2rem; }
      .hero-subtitle { font-size: 1rem; }
      .social-bar { left: 8px; gap: 10px; }
    }
  </style>
</head>
<body>

  <!-- Ícones Fixos (WhatsApp, Instagram, Facebook) -->
  <div class="social-bar" aria-hidden="false">
    <!-- WhatsApp (link padrão, substitua no modal) -->
    <a class="whatsapp" id="linkWhatsapp" href="https://wa.me/5534999704808" target="_blank" title="WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Instagram -->
    <a class="instagram" id="linkInstagram" href="https://instagram.com/lobiancoinvestimentos" target="_blank" title="Instagram">
      <i class="fab fa-instagram"></i>
    </a>

    <!-- Facebook -->
    <a class="facebook" id="linkFacebook" href="https://facebook.com/lobiancoinvestimentos" target="_blank" title="Facebook">
      <i class="fab fa-facebook-f"></i>
    </a>
  </div>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light sticky-top">
    <div class="container">
      <a class="navbar-brand" href="#">
        <img src="https://via.placeholder.com/160x60?text=Logo" alt="Logo" class="me-2">
        Lobianco Investimentos
      </a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a href="#lancamentos" class="nav-link">Lançamentos</a></li>
          <li class="nav-item"><a href="#planta" class="nav-link">Na Planta</a></li>
          <li class="nav-item"><a href="#aluguel" class="nav-link">Aluguel</a></li>
          <li class="nav-item"><a href="#contato" class="nav-link">Contato</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero-carousel">
    <div class="hero-slide" style="background-image:url('https://images.unsplash.com/photo-1613977257363-707ba9348227?auto=format&fit=crop&w=2070&q=80');">
      <div class="hero-content">
        <h1 class="hero-title">Viva o Alto Padrão</h1>
        <p class="hero-subtitle">Lançamentos exclusivos e oportunidades únicas.</p>
      </div>
    </div>
  </section>

  <!-- Seções -->
  <section id="lancamentos" class="py-5">
    <div class="container">
      <h2 class="text-center mb-5">Lançamentos</h2>
      <div class="row" id="lancamentos-container">
        <!-- Propriedades de Lançamento serão carregadas aqui -->
      </div>
    </div>
  </section>

  <section id="planta" class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-5">Na Planta</h2>
      <div class="row" id="planta-container">
        <!-- Propriedades Na Planta serão carregadas aqui -->
      </div>
    </div>
  </section>

  <section id="aluguel" class="py-5">
    <div class="container">
      <h2 class="text-center mb-5">Para Alugar</h2>
      <div class="row" id="aluguel-container">
        <!-- Propriedades Para Alugar serão carregadas aqui -->
      </div>
    </div>
  </section>

  <!-- Chat -->
  <div class="chat-assistant">
    <button class="chat-button" onclick="alert('Abrir chat IA')"><i class="fas fa-comments"></i></button>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <p>© 2025 Lobianco Investimentos - Todos os direitos reservados.</p>
          <p>Uberlândia - MG | (34) 99970-4808</p>
        </div>
        <div class="col-md-6 text-md-end">
          <a href="#" class="gestao-link" data-bs-toggle="modal" data-bs-target="#gestaoModal"><i class="fas fa-cog me-1"></i>Área de Gestão</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Modal Gestão -->
  <div class="modal fade" id="gestaoModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5>Configuração do Site</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="siteConfigForm">
            <div class="row g-3">
              <div class="col-md-6">
                <label>Nome do site</label>
                <input id="cfg_nome" type="text" class="form-control" placeholder="Lobianco Investimentos">
              </div>
              <div class="col-md-6">
                <label>Telefone</label>
                <input id="cfg_telefone" type="text" class="form-control" placeholder="(34) 99970-4808">
              </div>

              <div class="col-md-4">
                <label>Instagram (link)</label>
                <input id="cfg_instagram" type="text" class="form-control" placeholder="https://instagram.com/...">
              </div>
              <div class="col-md-4">
                <label>WhatsApp (link)</label>
                <input id="cfg_whatsapp" type="text" class="form-control" placeholder="https://wa.me/...">
              </div>
              <div class="col-md-4">
                <label>Facebook (link)</label>
                <input id="cfg_facebook" type="text" class="form-control" placeholder="https://facebook.com/...">
              </div>

              <div class="col-md-6">
                <label>Logo</label>
                <input id="cfg_logo" type="file" class="form-control">
              </div>
              <div class="col-md-6">
                <label>Cor principal</label>
                <input id="cfg_color" type="color" class="form-control form-control-color" value="#0066CC">
              </div>

              <div class="col-12">
                <label>Banner (até 4 imagens)</label>
                <input id="cfg_banners" type="file" multiple class="form-control">
              </div>

              <div class="col-12 mt-3">
                <h6>Gerenciar Imóveis</h6>
                <button id="btnNewProp" type="button" class="btn btn-success mb-3"><i class="fas fa-plus"></i> Novo Imóvel</button>
                <div class="table-responsive">
                  <table class="table table-bordered mb-0">
                    <thead>
                      <tr><th>Título</th><th>Tipo</th><th>Valor</th><th>Ações</th></tr>
                    </thead>
                    <tbody id="propsTableBody">
                      <tr>
                        <td>Residencial Skyline</td><td>Lançamento</td><td>R$ 980.000</td>
                        <td><button class="btn btn-sm btn-warning">Editar</button> <button class="btn btn-sm btn-danger">Excluir</button></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="col-12 d-flex justify-content-end mt-3">
                <button id="btnSaveConfig" type="button" class="btn btn-primary me-2">Salvar</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Ao salvar a config, aplicamos os links imediatamente nos ícones laterais (exemplo local)
    document.getElementById('btnSaveConfig').addEventListener('click', () => {
      const insta = document.getElementById('cfg_instagram').value.trim();
      const wa = document.getElementById('cfg_whatsapp').value.trim();
      const fb = document.getElementById('cfg_facebook').value.trim();
      if (wa) document.getElementById('linkWhatsapp').href = wa;
      if (insta) document.getElementById('linkInstagram').href = insta;
      if (fb) document.getElementById('linkFacebook').href = fb;
      // fechar modal
      const modal = bootstrap.Modal.getInstance(document.getElementById('gestaoModal'));
      modal.hide();
      alert('Configurações salvas (local). Integre com Supabase para persistência.');
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

  <script>
    // Função para criar um card de propriedade
    function createPropertyCard(property) {
      return `
        <div class="col-md-4">
          <div class="property-card">
            <img src="${property.image_url || 'https://via.placeholder.com/1200x800?text=Sem+Imagem'}" alt="${property.title}">
            <div class="property-info">
              <h5>${property.title}</h5>
              <p>${property.location}</p>
              <p class="property-price">${property.price}</p>
            </div>
          </div>
        </div>
      `;
    }

    // Função para buscar e renderizar propriedades
    async function fetchAndRenderProperties() {
      const lancamentosContainer = document.getElementById('lancamentos-container');
      const plantaContainer = document.getElementById('planta-container');
      const aluguelContainer = document.getElementById('aluguel-container');

      // Limpar containers e mostrar mensagem de carregamento
      lancamentosContainer.innerHTML = '<p class="text-center">Carregando lançamentos...</p>';
      plantaContainer.innerHTML = '<p class="text-center">Carregando imóveis na planta...</p>';
      aluguelContainer.innerHTML = '<p class="text-center">Carregando imóveis para alugar...</p>';

      try {
        const response = await fetch('http://localhost:3001/api/items');
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const properties = await response.json();

        // Limpar mensagens de carregamento
        lancamentosContainer.innerHTML = '';
        plantaContainer.innerHTML = '';
        aluguelContainer.innerHTML = '';

        if (properties.length === 0) {
          lancamentosContainer.innerHTML = '<p class="text-center">Nenhum lançamento encontrado.</p>';
          plantaContainer.innerHTML = '<p class="text-center">Nenhum imóvel na planta encontrado.</p>';
          aluguelContainer.innerHTML = '<p class="text-center">Nenhum imóvel para alugar encontrado.</p>';
          return;
        }

        properties.forEach(property => {
          const cardHtml = createPropertyCard(property);
          if (property.type === 'lancamento') {
            lancamentosContainer.innerHTML += cardHtml;
          } else if (property.type === 'na_planta') {
            plantaContainer.innerHTML += cardHtml;
          } else if (property.type === 'aluguel') {
            aluguelContainer.innerHTML += cardHtml;
          }
        });

        // Inicializar Slick Carousel após o carregamento das propriedades
        $('.hero-carousel').slick({
          autoplay: true,
          autoplaySpeed: 5000,
          dots: true,
          arrows: false,
          fade: true,
          cssEase: 'linear'
        });

      } catch (error) {
        console.error('Erro ao buscar propriedades:', error);
        lancamentosContainer.innerHTML = '<p class="text-center text-danger">Erro ao carregar lançamentos.</p>';
        plantaContainer.innerHTML = '<p class="text-center text-danger">Erro ao carregar imóveis na planta.</p>';
        aluguelContainer.innerHTML = '<p class="text-center text-danger">Erro ao carregar imóveis para alugar.</p>';
      }
    }

    // Chamar a função ao carregar o DOM
    document.addEventListener('DOMContentLoaded', fetchAndRenderProperties);

    // Ao salvar a config, aplicamos os links imediatamente nos ícones laterais (exemplo local)
    document.getElementById('btnSaveConfig').addEventListener('click', () => {
      const insta = document.getElementById('cfg_instagram').value.trim();
      const wa = document.getElementById('cfg_whatsapp').value.trim();
      const fb = document.getElementById('cfg_facebook').value.trim();
      if (wa) document.getElementById('linkWhatsapp').href = wa;
      if (insta) document.getElementById('linkInstagram').href = insta;
      if (fb) document.getElementById('linkFacebook').href = fb;
      // fechar modal
      const modal = bootstrap.Modal.getInstance(document.getElementById('gestaoModal'));
      modal.hide();
      alert('Configurações salvas (local). Integre com Supabase para persistência.');
    });
  </script>